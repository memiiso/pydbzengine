{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"pydbzengine","text":"<p>A Pythonic interface for the Debezium Engine, allowing you to consume database Change Data Capture (CDC) events directly in your Python applications.</p>"},{"location":"#features","title":"Features","text":"<ul> <li>Pure Python Interface: Interact with the powerful Debezium Engine using simple Python classes and methods.</li> <li>Pluggable Event Handlers: Easily create custom handlers to process CDC events according to your specific needs.</li> <li>Built-in Iceberg Handler: Stream change events directly into Apache Iceberg tables with zero boilerplate.</li> <li>Seamless Integration: Designed to work with popular Python data tools like dlt (data load tool).</li> <li>All Debezium Connectors: Supports all standard Debezium connectors (PostgreSQL, MySQL, SQL Server, Oracle, etc.).</li> </ul>"},{"location":"#how-it-works","title":"How it Works","text":"<p>This library acts as a bridge between the Python world and the Java-based Debezium Engine. It uses JPype to manage the JVM and interact with Debezium's Java classes, exposing a clean, Pythonic API so you can focus on your data logic without writing Java code.</p>"},{"location":"#quick-start","title":"Quick Start","text":"<pre><code>from typing import List\nfrom pydbzengine import ChangeEvent, BasePythonChangeHandler\nfrom pydbzengine import DebeziumJsonEngine\n\nclass PrintChangeHandler(BasePythonChangeHandler):\n    def handleJsonBatch(self, records: List[ChangeEvent]):\n        for record in records:\n            print(f\"Record: {record.value()}\")\n\nif __name__ == '__main__':\n    props = {\n        \"name\": \"engine\",\n        # ... set your connector properties ...\n    }\n\n    engine = DebeziumJsonEngine(properties=props, handler=PrintChangeHandler())\n    engine.run()\n</code></pre>"},{"location":"contributing/","title":"Contributing","text":"<p>Contributions are welcome! Whether it's reporting a bug, improving documentation, or adding new features, your help is appreciated.</p>"},{"location":"contributing/#getting-started","title":"Getting Started","text":"<ol> <li>Fork the Repository: Create a fork of <code>memiiso/pydbzengine</code> on GitHub.</li> <li>Clone Locally:     <pre><code>git clone https://github.com/your-username/pydbzengine.git\ncd pydbzengine\n</code></pre></li> <li>Install Development Dependencies:     <pre><code>pip install -e \".[dev]\"\n</code></pre></li> </ol>"},{"location":"contributing/#development-workflow","title":"Development Workflow","text":"<ol> <li>Create a Branch: Use a descriptive name for your feature or bug fix.</li> <li>Make Changes: Write your code and tests.</li> <li>Run Tests:     <pre><code>pytest\n</code></pre></li> <li>Update Documentation: If you're adding a new feature or changing behavior, update the relevant <code>docs/</code> files.</li> <li>Submit a Pull Request: Push your branch to your fork and create a PR against the <code>main</code> branch.</li> </ol>"},{"location":"contributing/#documentation-development","title":"Documentation Development","text":"<p>To preview the documentation locally:</p> <ol> <li>Install documentation dependencies:     <pre><code>pip install -e \".[docs]\"\n</code></pre></li> <li>Serve the documentation:     <pre><code>mkdocs serve\n</code></pre></li> <li>Open <code>http://127.0.0.1:8000</code> in your browser.</li> </ol>"},{"location":"how-it-works/","title":"How it Works","text":"<p><code>pydbzengine</code> provides a seamless bridge between Python and the Java-based Debezium Engine.</p>"},{"location":"how-it-works/#architecture","title":"Architecture","text":"<p>At its core, <code>pydbzengine</code> leverages JPype to: 1.  Launch a JVM: A Java Virtual Machine is started within the Python process. 2.  Load Debezium Jars: The library bundles the necessary Debezium Engine and connector JAR files. 3.  Proxy Objects: It wraps Java objects and types in Pythonic interfaces, allowing you to use <code>Properties</code> and <code>DebeziumJsonEngine</code> as if they were native Python classes.</p>"},{"location":"how-it-works/#data-flow","title":"Data Flow","text":"<ol> <li>Configuration: You define your Debezium configuration using a standard Python dictionary.</li> <li>Engine Initialization: The <code>DebeziumJsonEngine</code> is initialized with these properties and a Python-based handler.</li> <li>Event Capture: The Java Debezium Engine captures CDC events from your source database.</li> <li>Batch Processing: Instead of processing events one by one in Java, <code>pydbzengine</code> passes batches of events to your Python handler's <code>handleJsonBatch</code> method.</li> <li>Python Logic: Your custom logic (or built-in handlers like Iceberg/dlt) processes the <code>ChangeEvent</code> objects in pure Python.</li> </ol>"},{"location":"how-it-works/#performance-considerations","title":"Performance Considerations","text":"<p>By processing events in batches and leveraging Arrow/Parquet internally for handlers like Iceberg, <code>pydbzengine</code> maintains high throughput while providing the flexibility of Python.</p>"},{"location":"installation/","title":"Installation","text":""},{"location":"installation/#prerequisites","title":"Prerequisites","text":"<p>You must have a Java Development Kit (JDK) version 11 or newer installed and available in your system's <code>PATH</code>.</p>"},{"location":"installation/#recommended-installation-from-github","title":"Recommended Installation: From GitHub","text":"<p>Due to the package size (including <code>.jar</code> artifacts), new versions are not published to PyPI regularly. It is recommended to install the package directly from GitHub to get the latest features and fixes.</p> <p>You can install either the latest development version from the <code>main</code> branch or a specific, stable version from a release tag.</p>"},{"location":"installation/#latest-development-version","title":"Latest Development Version","text":"<pre><code># For core functionality\npip install git+https://github.com/memiiso/pydbzengine.git\n\n# With extras (e.g., iceberg, dlt, docs)\npip install 'pydbzengine[iceberg,docs]@git+https://github.com/memiiso/pydbzengine.git'\npip install 'pydbzengine[dlt,docs]@git+https://github.com/memiiso/pydbzengine.git'\n</code></pre>"},{"location":"installation/#specific-version","title":"Specific Version","text":"<p>To install a specific version from a release tag (e.g., <code>3.2.0.0</code>):</p> <pre><code>pip install git+https://github.com/memiiso/pydbzengine.git@3.2.0.0\n</code></pre>"},{"location":"installation/#alternative-from-pypi","title":"Alternative: From PyPI","text":"<p>An older version is available on PyPI. You can install it, but be aware that it may not have the latest updates.</p> <pre><code># For core functionality\npip install pydbzengine\n\n# With extras\npip install 'pydbzengine[iceberg,docs]'\npip install 'pydbzengine[dlt,docs]'\n</code></pre>"},{"location":"handlers/","title":"Handlers Overview","text":"<p><code>pydbzengine</code> comes with several built-in handlers to stream CDC events directly into common data destinations. You can also easily create your own by extending the <code>BasePythonChangeHandler</code>.</p>"},{"location":"handlers/#available-handlers","title":"Available Handlers","text":"<ul> <li>Apache Iceberg: Stream change events directly into Apache Iceberg tables. Supports automatic schema inference and partitioning (via <code>IcebergChangeHandlerV2</code>).</li> <li>dlt (data load tool): Integrate with <code>dlt</code> to load data into DuckDB, BigQuery, Snowflake, and more.</li> <li>Custom Handlers: Implement your own logic for any destination or processing requirement.</li> </ul>"},{"location":"handlers/#using-a-handler","title":"Using a Handler","text":"<p>To use a handler, simply pass an instance of it to the <code>DebeziumJsonEngine</code>:</p> <pre><code>from pydbzengine import DebeziumJsonEngine\nfrom pydbzengine.handlers.iceberg import IcebergChangeHandlerV2\n\n# ... setup catalog and props ...\nprops = {\n    \"name\": \"engine\",\n    # ...\n}\nhandler = IcebergChangeHandlerV2(catalog=catalog, ...)\nengine = DebeziumJsonEngine(properties=props, handler=handler)\nengine.run()\n</code></pre>"},{"location":"handlers/custom/","title":"Custom Handlers","text":"<p>You can easily create your own custom handlers by extending the <code>BasePythonChangeHandler</code> class.</p>"},{"location":"handlers/custom/#creating-a-handler","title":"Creating a Handler","text":"<p>You only need to implement the <code>handleJsonBatch</code> method. This method receives a list of <code>ChangeEvent</code> objects.</p> <pre><code>from typing import List\nfrom pydbzengine import ChangeEvent, BasePythonChangeHandler\n\nclass MyCustomHandler(BasePythonChangeHandler):\n    def handleJsonBatch(self, records: List[ChangeEvent]):\n        print(f\"Received batch of {len(records)} records\")\n        for record in records:\n            # Access event data\n            dest = record.destination()\n            key = record.key()\n            value = record.value()\n\n            # Implement your logic here (e.g., push to Kafka, call API, etc.)\n            print(f\"Processing event for {dest}\")\n</code></pre>"},{"location":"handlers/custom/#the-changeevent-object","title":"The ChangeEvent Object","text":"<p>The <code>ChangeEvent</code> object provides the following methods:</p> <ul> <li><code>destination()</code>: Returns the destination topic/table name.</li> <li><code>key()</code>: Returns the JSON string representing the event key.</li> <li><code>value()</code>: Returns the JSON string representing the event value.</li> </ul>"},{"location":"handlers/dlt/","title":"dlt (data load tool) Handler","text":"<p>The <code>DltChangeHandler</code> integrates seamlessly with the dlt library, allowing you to load CDC events into any destination <code>dlt</code> supports.</p>"},{"location":"handlers/dlt/#features","title":"Features","text":"<ul> <li>Schema Evolution: leverages <code>dlt</code>'s powerful schema inference and evolution capabilities.</li> <li>Multi-Destination: Supports DuckDB, BigQuery, Snowflake, Redshift, and more.</li> <li>Normalization: Automatically normalizes nested data according to your <code>dlt</code> configuration.</li> </ul>"},{"location":"handlers/dlt/#example-usage","title":"Example Usage","text":"<pre><code>import dlt\nfrom pydbzengine.handlers.dlt import DltChangeHandler\n\n# Create a dlt pipeline\ndlt_pipeline = dlt.pipeline(\n    pipeline_name=\"dbz_cdc_events\",\n    destination=\"duckdb\",\n    dataset_name=\"dbz_data\"\n)\n\nhandler = DltChangeHandler(dlt_pipeline=dlt_pipeline)\n</code></pre> <p>For a full working example, see dlt_consuming.py.</p>"},{"location":"handlers/iceberg/","title":"Apache Iceberg Handler","text":"<p>The primary Iceberg handler is <code>IcebergChangeHandlerV2</code>. It is designed to stream CDC events directly into Apache Iceberg tables, automatically inferring schemas and managing table structures.</p>"},{"location":"handlers/iceberg/#icebergchangehandlerv2-recommended","title":"IcebergChangeHandlerV2 (Recommended)","text":"<p>This is the most advanced handler, which automatically infers the schema from the Debezium events and creates well-structured Iceberg tables.</p> <ul> <li>Automatic Schema Inference: Inspects the first batch of records and infers the schema using PyArrow, preserving native data types (e.g., <code>LongType</code>, <code>TimestampType</code>).</li> <li>Use Case: Ideal for scenarios where you want the pipeline to automatically create tables with native data types that mirror the source.</li> <li>Robustness: If a field's type cannot be inferred (e.g., all <code>null</code>), it safely falls back to <code>StringType</code>.</li> <li>Metadata: Adds <code>_consumed_at</code>, <code>_dbz_event_key</code>, and <code>_dbz_event_key_hash</code> columns for traceability.</li> </ul>"},{"location":"handlers/iceberg/#example-usage","title":"Example Usage","text":"<pre><code>from pyiceberg.catalog import load_catalog\nfrom pydbzengine.handlers.iceberg import IcebergChangeHandlerV2\n\nconf = {\n    \"uri\": \"http://localhost:8181\",\n    \"warehouse\": \"warehouse\",\n    \"s3.endpoint\": \"http://localhost:9000\",\n    \"s3.access-key-id\": \"minioadmin\",\n    \"s3.secret-access-key\": \"minioadmin\",\n}\ncatalog = load_catalog(name=\"rest\", **conf)\nhandler = IcebergChangeHandlerV2(\n    catalog=catalog, \n    destination_namespace=(\"iceberg\", \"debezium_cdc_data\")\n)\n</code></pre>"},{"location":"handlers/iceberg/#icebergchangehandler-v1","title":"IcebergChangeHandler (V1)","text":"<p>A simpler handler that appends change data to a source-equivalent Iceberg table using a fixed schema.</p> <ul> <li>Structure: The <code>before</code> and <code>after</code> payloads are stored as complete JSON strings.</li> <li>Use Case: Best for creating a \"bronze\" layer where you want to capture the raw Debezium event exactly as it comes, absorbing all source system schema changes automatically.</li> </ul>"}]}